<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZEN.COM Pay 2.0 — Button Animations by Mateusz Karbowski</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet"/>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body, #root { width: 100%; min-height: 100vh; }
    body { font-family: 'Nunito', sans-serif; background: #fff; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const CONNECTOR_PATH = "M7.55762 0C9.24192 3.14729 12.5597 5.28906 16.3789 5.28906C20.1981 5.28906 23.5159 3.14729 25.2002 0H32V39H25.248C23.5797 35.8019 20.2357 33.6172 16.3789 33.6172C12.5222 33.6172 9.17806 35.8019 7.50977 39H0V0H7.55762Z";
    const OV = 15, W = 408, CIR = 60, CON = 32;
    const PW = W - CIR - CON + OV * 2;
    const HE = "cubic-bezier(0.49,0.01,0.58,1)";

    /* ─── Spring ─── */
    function useSpring(target, cfg) {
      const ref = useRef({ value: target, velocity: 0, target });
      const [value, setValue] = useState(target);
      const raf = useRef(null), lt = useRef(null);
      useEffect(() => {
        ref.current.target = target;
        const step = (ts) => {
          if (lt.current === null) { lt.current = ts; raf.current = requestAnimationFrame(step); return; }
          const dt = Math.min((ts - lt.current) / 1000, 0.064); lt.current = ts;
          const s = ref.current, d = s.value - s.target;
          s.velocity += ((-cfg.stiffness * d - cfg.damping * s.velocity) / cfg.mass) * dt;
          s.value += s.velocity * dt;
          if (Math.abs(s.velocity) < 0.01 && Math.abs(d) < 0.1) { s.value = s.target; s.velocity = 0; setValue(s.target); lt.current = null; return; }
          setValue(s.value); raf.current = requestAnimationFrame(step);
        };
        raf.current = requestAnimationFrame(step);
        return () => { if (raf.current) cancelAnimationFrame(raf.current); lt.current = null; };
      }, [target]);
      return value;
    }

    const lerp = (a, b, t) => a + (b - a) * t;
    const cl = (v, a = 0, b = 1) => Math.max(a, Math.min(b, v));
    function lC(c1, c2, t) {
      t = cl(t);
      const p = (s, i) => parseInt(s.slice(i, i + 2), 16);
      return "rgb(" + Math.round(lerp(p(c1,1),p(c2,1),t)) + "," + Math.round(lerp(p(c1,3),p(c2,3),t)) + "," + Math.round(lerp(p(c1,5),p(c2,5),t)) + ")";
    }

    function Badge({ number, active, hovered }) {
      if (!active) return (
        <div style={{ width:25,height:25,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.20)",borderRadius:20.5,outline:"1px solid #B5B5B5",outlineOffset:-1,flexShrink:0 }}>
          <span style={{ color:"#B5B5B5",fontSize:14,fontWeight:700,lineHeight:"16px" }}>{number}</span>
        </div>
      );
      return (
        <div style={{ width:25,height:25,display:"flex",alignItems:"center",justifyContent:"center",
          background:hovered?"rgba(255,255,255,0.30)":"rgba(255,255,255,0.10)",borderRadius:20.5,
          outline:hovered?"1px solid rgba(255,255,255,0.40)":"1px solid rgba(255,255,255,0.20)",
          outlineOffset:-1,flexShrink:0,transition:"background 300ms "+HE+", outline 300ms "+HE }}>
          <span style={{ color:"#fff",fontSize:14,fontWeight:700,lineHeight:"16px" }}>{number}</span>
        </div>
      );
    }

    function Chk() {
      return <svg width="26" height="26" viewBox="0 0 26 26" fill="none"><circle cx="13" cy="13" r="12" fill="#222" stroke="#222" strokeWidth="2"/><path d="M8 13.5L11.5 17L18 10" stroke="#22E243" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"/></svg>;
    }

    function Cn({ color }) {
      return <svg width="32" height="39" viewBox="0 0 32 39" fill="none" style={{display:"block"}}><path d={CONNECTOR_PATH} fill={color}/></svg>;
    }

    function useMorph(step, cfg) {
      const p = useSpring(step===1?0:1, cfg), cp = cl(p);
      return { p, cp, aW:lerp(PW,CIR,p), aBg:lC("#F7F7F7","#22E243",cp),
        bW:lerp(CIR,PW,p), bL:lerp(W-CIR,W-PW,p),
        bBg:cp<=0.5?lC("#F7F7F7","#222222",cp*2):lC("#222222","#22E243",(cp-0.5)*2),
        cL:lerp(PW-OV,CIR-OV,p), cC:lC("#F7F7F7","#22E243",cp),
        aPill:cp<0.3?lerp(1,0,cp/0.3):0, aCheck:cp>0.5?lerp(0,1,(cp-0.5)/0.5):0,
        bBadge:cp<0.3?lerp(1,0,cp/0.3):0, bPill:cp>0.5?lerp(0,1,(cp-0.5)/0.5):0 };
    }

    function MB({ m, hovered, wrapStyle, children }) {
      const inner = (<React.Fragment>
        {children}
        <div style={{ position:"absolute",top:0,left:0,width:m.aW,height:60,background:m.aBg,borderRadius:100,zIndex:2,overflow:"hidden" }}>
          <div style={{ position:"absolute",inset:0,padding:2,display:"flex",opacity:m.aPill,pointerEvents:"none" }}>
            <div style={{ flex:1,background:"#222",borderRadius:100,display:"flex",alignItems:"center",justifyContent:"center",gap:8,whiteSpace:"nowrap" }}>
              <Badge number={1} active hovered={hovered}/><span style={{ color:"#fff",fontSize:17,fontWeight:700 }}>Accept order</span>
            </div>
          </div>
          <div style={{ position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:m.aCheck,pointerEvents:"none" }}><Chk/></div>
        </div>
        <div style={{ position:"absolute",top:"50%",transform:"translateY(-50%)",left:m.cL,zIndex:1 }}><Cn color={m.cC}/></div>
        <div style={{ position:"absolute",top:0,left:m.bL,width:m.bW,height:60,background:m.bBg,borderRadius:100,zIndex:2,overflow:"hidden" }}>
          <div style={{ position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:m.bBadge,pointerEvents:"none",zIndex:1 }}><Badge number={2}/></div>
          <div style={{ position:"absolute",inset:0,padding:2,display:"flex",opacity:m.bPill,pointerEvents:"none",zIndex:1 }}>
            <div style={{ flex:1,background:"#222",borderRadius:100,display:"flex",alignItems:"center",justifyContent:"center",gap:8,whiteSpace:"nowrap" }}>
              <Badge number={2} active hovered={hovered}/><span style={{ color:"#fff",fontSize:17,fontWeight:700 }}>Confirm Payment</span>
            </div>
          </div>
        </div>
      </React.Fragment>);
      return wrapStyle ? <div style={{ position:"absolute",width:"100%",height:"100%",...wrapStyle }}>{inner}</div> : inner;
    }

    /* 1. Spring Morph */
    function V1({ step, hovered }) { return <MB m={useMorph(step,{stiffness:300,damping:20,mass:1})} hovered={hovered}/>; }

    /* 2. Rubber Band */
    function V2({ step, hovered, clickCount }) {
      const m = useMorph(step,{stiffness:300,damping:20,mass:1});
      const [pr,setPr] = useState(false);
      const sx = useSpring(pr?0.92:1,{stiffness:400,damping:15,mass:0.8});
      const sy = useSpring(pr?1.06:1,{stiffness:400,damping:15,mass:0.8});
      useEffect(() => { if(clickCount>0){setPr(true);const t=setTimeout(()=>setPr(false),120);return()=>clearTimeout(t);} },[clickCount]);
      return <MB m={m} hovered={hovered} wrapStyle={{transform:"scaleX("+sx+") scaleY("+sy+")",transformOrigin:"center"}}/>;
    }

    /* 3. Pulse Glow */
    function V3({ step, hovered, clickCount }) {
      const m = useMorph(step,{stiffness:300,damping:20,mass:1});
      return <MB m={m} hovered={hovered}>
        <style dangerouslySetInnerHTML={{__html:
          "@keyframes gr{0%{transform:scaleX(.95) scaleY(.9);opacity:.7}100%{transform:scaleX(1.08) scaleY(1.3);opacity:0}}"+
          "@keyframes gr2{0%{transform:scaleX(.97) scaleY(.95);opacity:.4}100%{transform:scaleX(1.12) scaleY(1.5);opacity:0}}"
        }}/>
        {clickCount>0&&<React.Fragment>
          <div key={"a"+clickCount} style={{position:"absolute",inset:-2,borderRadius:100,border:"2px solid #22E243",pointerEvents:"none",zIndex:0,animation:"gr .7s ease-out forwards"}}/>
          <div key={"b"+clickCount} style={{position:"absolute",inset:-2,borderRadius:100,border:"1.5px solid #22E243",pointerEvents:"none",zIndex:0,animation:"gr2 .8s ease-out .08s forwards"}}/>
        </React.Fragment>}
      </MB>;
    }

    /* 4. Shockwave */
    function V4({ step, hovered, clickCount }) {
      const m = useMorph(step,{stiffness:300,damping:20,mass:1});
      const [punch,setPunch] = useState(false);
      const s = useSpring(punch?1.08:1,{stiffness:500,damping:14,mass:0.6});
      useEffect(()=>{if(clickCount>0){setPunch(true);const t=setTimeout(()=>setPunch(false),80);return()=>clearTimeout(t);}},[clickCount]);
      return <React.Fragment>
        <style dangerouslySetInnerHTML={{__html:
          "@keyframes shock{0%{transform:scale(0.3);opacity:1;border-width:4px}100%{transform:scale(2.5);opacity:0;border-width:0.5px}}"+
          "@keyframes flash{0%{opacity:0.5}100%{opacity:0}}"
        }}/>
        {clickCount>0&&<React.Fragment>
          <div key={"s"+clickCount} style={{position:"absolute",left:"50%",top:"50%",width:60,height:60,marginLeft:-30,marginTop:-30,borderRadius:"50%",border:"4px solid #22E243",pointerEvents:"none",zIndex:10,animation:"shock .6s ease-out forwards"}}/>
          <div key={"f"+clickCount} style={{position:"absolute",inset:0,borderRadius:100,background:"radial-gradient(circle at 50% 50%, rgba(34,226,67,0.25) 0%, transparent 70%)",pointerEvents:"none",zIndex:3,animation:"flash .4s ease-out forwards"}}/>
        </React.Fragment>}
        <MB m={m} hovered={hovered} wrapStyle={{transform:"scale("+s+")",transformOrigin:"center"}}/>
      </React.Fragment>;
    }

    /* 5. Celebration Burst */
    function V5({ step, hovered, clickCount }) {
      const m = useMorph(step,{stiffness:300,damping:20,mass:1});
      const cs = ["#22E243","#1BD43B","#4AFF6B","#00CC33","#88FF99","#fff","#AAFFBB"];
      return <React.Fragment>
        <style dangerouslySetInnerHTML={{__html:"@keyframes pf{0%{opacity:1;transform:translate(0,0) scale(1)}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0)}}"}}/>
        {step===2&&clickCount>0&&Array.from({length:18}).map((_,i)=>{
          const a=(i/18)*Math.PI*2,d=35+Math.random()*55,sz=3+Math.random()*5;
          return <div key={clickCount+"-"+i} style={{position:"absolute",left:W/2,top:30,width:sz,height:sz,
            background:cs[i%cs.length],borderRadius:Math.random()>.4?"50%":"1px",
            animation:"pf "+(0.5+Math.random()*0.3)+"s ease-out "+(i*0.015)+"s forwards",
            pointerEvents:"none",zIndex:10,"--tx":Math.cos(a)*d+"px","--ty":(Math.sin(a)*d-15)+"px"}}/>})}
        <MB m={m} hovered={hovered}/>
      </React.Fragment>;
    }

    /* 6. Neon Trail — green neon light traces the outline of the button during transition, leaves a brief afterglow */
    function V6({ step, hovered, clickCount }) {
      const m = useMorph(step,{stiffness:280,damping:22,mass:1});
      const animating = m.cp > 0.02 && m.cp < 0.98;
      const glowIntensity = Math.sin(m.cp * Math.PI);

      return <React.Fragment>
        <style dangerouslySetInnerHTML={{__html:
          "@keyframes trace-glow{0%{opacity:0;filter:blur(0px)}15%{opacity:1;filter:blur(0px)}85%{opacity:1;filter:blur(2px)}100%{opacity:0;filter:blur(8px)}}"+
          "@keyframes neon-flicker{0%,100%{opacity:0.8}50%{opacity:1}25%{opacity:0.6}75%{opacity:0.9}}"
        }}/>

        {/* Neon glow behind button during transition */}
        {animating && <div style={{
          position:"absolute", inset:-4,
          borderRadius:100,
          boxShadow:"0 0 "+(8+glowIntensity*20)+"px "+(2+glowIntensity*8)+"px rgba(34,226,67,"+(0.15+glowIntensity*0.35)+")",
          pointerEvents:"none", zIndex:0,
          animation:"neon-flicker 0.15s ease infinite",
        }}/>}

        {/* Brief afterglow flash on settle */}
        {clickCount>0 && <div key={"ng"+clickCount} style={{
          position:"absolute", inset:-3,
          borderRadius:100,
          border:"1.5px solid rgba(34,226,67,0.6)",
          boxShadow:"0 0 15px 3px rgba(34,226,67,0.3), inset 0 0 15px 3px rgba(34,226,67,0.1)",
          pointerEvents:"none", zIndex:0,
          animation:"trace-glow 0.8s ease-out forwards",
        }}/>}

        <MB m={m} hovered={hovered} wrapStyle={{
          filter: animating ? "drop-shadow(0 0 "+(2+glowIntensity*6)+"px rgba(34,226,67,"+(glowIntensity*0.5)+"))" : "none",
        }}/>
      </React.Fragment>;
    }

    /* ═══ MAIN ═══ */
    const VS = [
      { name:"Spring Morph", desc:"Clean spring physics", C:V1 },
      { name:"Rubber Band", desc:"Squash on press, spring release", C:V2 },
      { name:"Pulse Glow", desc:"Expanding energy rings", C:V3 },
      { name:"Shockwave", desc:"Scale punch + radial shockwave", C:V4 },
      { name:"Celebration", desc:"Confetti burst on confirm", C:V5 },
      { name:"Neon Trail", desc:"Glowing neon trace + afterglow", C:V6 },
    ];

    function App() {
      const [steps,setSteps]=useState(VS.map(()=>1));
      const [hovs,setHovs]=useState(VS.map(()=>false));
      const [clks,setClks]=useState(VS.map(()=>0));
      const toggle=i=>{setSteps(p=>{const n=[...p];n[i]=n[i]===1?2:1;return n});setClks(p=>{const n=[...p];n[i]++;return n});setHovs(p=>{const n=[...p];n[i]=false;return n})};
      const hov=(i,v)=>setHovs(p=>{const n=[...p];n[i]=v;return n});

      return (
        <div style={{
          width:"100%", minHeight:"100vh", boxSizing:"border-box",
          padding:"24px 16px 16px",
          display:"flex", flexDirection:"column", alignItems:"center",
          background:"#fff",
        }}>
          {/* Header */}
          <div style={{ textAlign:"center", marginBottom:"clamp(20px,3vh,40px)" }}>
            <div style={{ fontSize:"clamp(11px,1.2vw,14px)", fontWeight:800, color:"#22E243", letterSpacing:4, textTransform:"uppercase", marginBottom:4 }}>
              ZEN.COM Pay 2.0
            </div>
            <div style={{ fontSize:"clamp(22px,3vw,36px)", fontWeight:900, color:"#222", lineHeight:1.15 }}>
              Button Animations
            </div>
            <div style={{ fontSize:"clamp(12px,1.1vw,15px)", color:"#bbb", marginTop:6, fontWeight:400, fontStyle:"italic" }}>
              by Mateusz Karbowski
            </div>
          </div>

          {/* Grid */}
          <div style={{
            display:"grid",
            gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 420px), 1fr))",
            gap:"clamp(32px,5vh,56px) clamp(20px,3vw,48px)",
            width:"100%",
            maxWidth:1400,
            alignContent:"start",
          }}>
            {VS.map(({name,desc,C},i)=>(
              <div key={i} style={{ display:"flex",flexDirection:"column",alignItems:"center",gap:"clamp(10px,1.5vh,16px)" }}>
                <div style={{ textAlign:"center" }}>
                  <div style={{ fontSize:11,fontWeight:700,color:"#ddd",letterSpacing:1.5 }}>{i+1} / {VS.length}</div>
                  <div style={{ fontSize:"clamp(15px,1.3vw,18px)",fontWeight:800,color:"#222",marginTop:2 }}>{name}</div>
                  <div style={{ fontSize:"clamp(11px,1vw,13px)",color:"#aaa",marginTop:1 }}>{desc}</div>
                </div>
                <div style={{
                  width:"100%", maxWidth:W,
                  height:60,
                  position:"relative",
                  display:"flex", alignItems:"center", justifyContent:"center",
                }}>
                  <div
                    onClick={()=>toggle(i)}
                    onMouseEnter={()=>hov(i,true)}
                    onMouseLeave={()=>hov(i,false)}
                    style={{ position:"relative", width:W, height:60, cursor:"pointer" }}
                  >
                    <C step={steps[i]} hovered={hovs[i]} clickCount={clks[i]}/>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
  </script>
</body>
</html>
